üõ†Ô∏è **Resumen de incidencias detectadas en la app del LivingLab**

Hola equipo dev,

He detectado varios comportamientos inesperados que necesitan revisi√≥n y ajuste. Te detallo cada uno con contexto t√©cnico:

---

### 1Ô∏è‚É£ **Selecci√≥n de sensores (SessionsPage)**
Actualmente al seleccionar un sensor espec√≠fico desde la UI, se est√° interpretando que todos los sensores han sido seleccionados o se est√° registrando como `undefined`.

- **Posible causa**: El identificador (`ieeeAddr` o similar) del sensor no est√° siendo correctamente pasado a la funci√≥n `toggleSensor`.
- **Revisa**: Que los `key`, `value` y callbacks en los componentes de selecci√≥n est√©n correctamente definidos y que `sensor` tenga estructura completa (`ieeeAddr`, `friendlyName`, etc.).
- **Logs actuales**: `Cambiando sensor undefined a seleccionado`.

---

### 2Ô∏è‚É£ **Filtrado para CSV**
Se necesita implementar un filtro activo: **solo guardar datos en CSV de los sensores seleccionados por el usuario**.

- A√±adir un mecanismo interno (por ejemplo, `monitoredSensors = new Set()`) dentro de `sensorService.js` o donde se procesen los mensajes MQTT.
- Ignorar tr√°fico de sensores no seleccionados.
- Exportar √∫nicamente datos relevantes a CSV.

---

### 3Ô∏è‚É£ **C√°maras IP aparecen como desconectadas (KO)**
Aunque varias c√°maras est√°n activas (p. ej. c√°maras 32, 33, 35), el sistema reporta todas como KO.

- **Sospecha**: El mecanismo de verificaci√≥n no est√° actualizando correctamente el estado real o est√° usando una l√≥gica de "ping" ineficaz.
- **Revisar**: Timeout, m√©todo de verificaci√≥n (¬øse est√° usando `ffprobe`, `fetch`, o `axios` contra una URL real de la c√°mara?), y trazas por c√°mara.

---

### 4Ô∏è‚É£ **WebSocket: `ws://localhost:undefined`**
El cliente intenta conectar a un WebSocket con puerto `undefined`, lo que genera error de conexi√≥n.

- **Soluci√≥n esperada**: Asegurar que el puerto WebSocket se est√° inyectando correctamente desde `.env` o config del entorno (`REACT_APP_WS_PORT` u otro).

---

### 5Ô∏è‚É£ **Error 500 al iniciar sesi√≥n**
Al iniciar sesi√≥n se recibe un `POST /api/sessions 500 (Internal Server Error)`.

- **Posible causa**: El payload enviado contiene sensores mal formateados (por ejemplo `undefined`) o un array vac√≠o.
- **Revisar**: Validaciones antes del env√≠o, y logs del backend para identificar la excepci√≥n.

---

### 6Ô∏è‚É£ **Render hook mismatch (`Rendered fewer hooks than expected`)**
Este error de React sugiere que hay un `return` condicional en medio de una funci√≥n que usa hooks (`useState`, `useEffect`, etc.).

- **Soluci√≥n esperada**: Revisa que no haya `if (...) return ...` antes de declarar todos los hooks.

---

üß™ Quedo atento por si necesitas reproducir alg√∫n error o pasar capturas. ¬°Gracias!

DevOps Team.